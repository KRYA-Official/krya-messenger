<div class="container">
    <div class="brand">KRYA</div>
    <h1>Official Messenger</h1>
    <p>рдореБрдХреЗрд╢ рд░рд╛рдп рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо</p>
    <br>
    <h3>рдЕрдкрдирд╛ рдпреВрдирд┐рдХ KRYA рд╣реИрдВрдбрд▓ рдмреБрдХ рдХрд░реЗрдВ</h3>
    <p>рдкрд╕рдВрджреАрджрд╛ рдирд╛рдо рдЪреЗрдХ рдХрд░реЗрдВ (рд╕рд┐рд░реНрдл тВ╣9/рдорд╛рд╣)</p>
    
    <input type="text" id="handleInput" placeholder="рдЬреИрд╕реЗ: mukesh" style="padding: 12px; width: 80%; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 10px; font-size: 16px;">
    
    <button id="checkBtn" style="padding: 12px 25px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 85%; margin-bottom: 10px;">Availability рдЪреЗрдХ рдХрд░реЗрдВ</button>
    
    <div id="statusMsg" style="margin-top: 10px; font-weight: bold;"></div>

    <div id="paymentArea" style="display:none; margin-top:20px;">
        <p style="color: green; font-weight: bold;">тЬЕ рдпрд╣ рдирд╛рдо рдЙрдкрд▓рдмреНрдз рд╣реИ!</p>
        <a href="upi://pay?pa=93690mukeshkumar@axl&pn=Mukesh%20Ray&am=9&cu=INR" class="pay-button" style="background-color: #28a745;">тВ╣9 рдкреЗ рдХрд░реЗрдВ рдФрд░ рдмреБрдХ рдХрд░реЗрдВ</a>
    </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCtSIGAybHuIga19QpPRS1egRrsbhvJV2c",
    authDomain: "krya-94e55.firebaseapp.com",
    projectId: "krya-94e55",
    storageBucket: "krya-94e55.firebasestorage.app",
    messagingSenderId: "1025043894227",
    appId: "1:1025043894227:web:fa57c21ed2f6381a792926"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const checkBtn = document.getElementById('checkBtn');
  const statusMsg = document.getElementById('statusMsg');
  const paymentArea = document.getElementById('paymentArea');

  checkBtn.onclick = async () => {
    const handle = document.getElementById('handleInput').value.toLowerCase().trim();
    if (handle.length < 3) {
      statusMsg.innerHTML = "тЭМ рдирд╛рдо рдХрдо рд╕реЗ рдХрдо 3 рдЕрдХреНрд╖рд░ рдХрд╛ рд╣реЛ!";
      statusMsg.style.color = "red";
      return;
    }
    statusMsg.innerHTML = "ЁЯФН рдЬрд╛рдВрдЪ рд╣реЛ рд░рд╣реА рд╣реИ...";
    try {
      const docSnap = await getDoc(doc(db, "handles", handle));
      if (docSnap.exists()) {
        statusMsg.innerHTML = "ЁЯЪл @" + handle + " рдкрд╣рд▓реЗ рд╕реЗ рдмреБрдХ рд╣реИред";
        statusMsg.style.color = "red";
        paymentArea.style.display = "none";
      } else {
        statusMsg.innerHTML = "";
        paymentArea.style.display = "block";
      }
    } catch (e) {
      statusMsg.innerHTML = "тЪая╕П рдХреГрдкрдпрд╛ Firebase Rules рдЪреЗрдХ рдХрд░реЗрдВред";
    }
  };
</script>
